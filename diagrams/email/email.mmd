flowchart LR
    %% Foundational DNS Setup
    F[Spaceship / DNS] -- hosts --> G[MX Record]
    F -- hosts --> H[SPF/DKIM Records]

    %% Central Gmail Entity
    A[Gmail]

    %% Receiving Email Flow
    subgraph Incoming[Receiving Email]
        direction LR
        D[Sender] --sends to<br>you@domain.com--> E[ImprovMX]
        E --forwards to --> A
    end

    %% Sending Email Flow
    subgraph Outgoing[Sending Email]
        direction LR
        A --sends via<br>SMTP/API--> B[Mailjet]
        B --delivers from<br>you@domain.com--> C[Recipient]
    end

    %% How DNS is used by services
    G -. directs mail for<br>your domain to .-> E
    H -. validates mail from<br>your domain for .-> B

    %% Modern Color Styling
    classDef sending fill:#e1f5fe,stroke:#029ae4,stroke-width:2px;
    classDef receiving fill:#fff3e0,stroke:#ff7700,stroke-width:2px;
    classDef service fill:#f3e5f5,stroke:#8732b4,stroke-width:2px;
    classDef gmail fill:#ffffff,stroke:#EA4335,stroke-width:3px;
    classDef dnsrecord fill:#fafafa,stroke:#8732b4,stroke-width:2px,stroke-dasharray: 3;

    class Outgoing sending;
    class Incoming receiving;
    class B,E service;
    class F service;
    class G,H dnsrecord;
    class A gmail;